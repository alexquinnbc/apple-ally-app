<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Ally for Apple Users (Enhanced UX)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        :root {
            --bg-color: #f0f0f0;
            --text-color: #333;
            --header-bg: #333;
            --header-text: #fff;
            --nav-button-text: #ccc;
            --nav-button-hover-bg: #555;
            --nav-button-active-bg: #555;
            --section-title-color: #2c3e50;
            --section-border-color: #e0e0e0;
            --hero-bg: #fff;
            --hero-title-color: #1a5f99;
            --cta-bg: #007aff;
            --cta-text: #fff;
            --cta-hover-bg: #005ecb;
            --cta-active-bg: #004a9b;
            --info-card-gradient-start: #ffffff;
            --info-card-gradient-end: #e8e8e8;
            --info-card-border: #d8d8d8;
            --info-card-shadow-light: #ffffff;
            --info-card-shadow-dark: #cccccc;
            --input-bg-gradient-start: #fefefe;
            --input-bg-gradient-end: #f0f0f0;
            --input-border: #bbb;
            --input-shadow: rgba(0,0,0,0.1);
            --task-card-title: #005ecb;
            --link-color: #007aff;
            --table-header-bg: #e9ecef;
            --table-border: #ddd;
            --modal-bg: rgba(0,0,0,0.6);
            --skeuo-panel-gradient-start: #f7f7f7;
            --skeuo-panel-gradient-end: #e0e0e0;
            --skeuo-panel-shadow-light: #ffffff;
            --skeuo-panel-shadow-dark: #c7c7c7;
            --skeuo-panel-border: #d1d1d1;
            --skeuo-button-text: #555;
            --skeuo-button-gradient-start: #f7f7f7;
            --skeuo-button-gradient-end: #e0e0e0;
            --skeuo-button-border: #bbb;
            --skeuo-paper-bg: #fdfdfa;
            --skeuo-paper-border: #e0e0cc;
            --footer-bg: #222;
            --footer-text: #aaa;
            --primary-accent: #007aff;
        }

        [data-theme="dark"] {
            --bg-color: #1e1e1e;
            --text-color: #e0e0e0;
            --header-bg: #2a2a2a;
            --nav-button-text: #aaa;
            --nav-button-hover-bg: #444;
            --nav-button-active-bg: #444;
            --section-title-color: #90caf9;
            --section-border-color: #444;
            --hero-bg: #2c2c2c;
            --hero-title-color: #64b5f6;
            --cta-bg: #0277bd;
            --cta-hover-bg: #01579b;
            --cta-active-bg: #01477e;
            --info-card-gradient-start: #3a3a3a;
            --info-card-gradient-end: #2c2c2c;
            --info-card-border: #4a4a4a;
            --info-card-shadow-light: #424242;
            --info-card-shadow-dark: #121212;
            --input-bg-gradient-start: #333;
            --input-bg-gradient-end: #282828;
            --input-border: #555;
            --input-shadow: rgba(0,0,0,0.3);
            --task-card-title: #64b5f6;
            --link-color: #64b5f6;
            --table-header-bg: #3a3a3a;
            --table-border: #555;
            --modal-bg: rgba(0,0,0,0.8);
            --skeuo-panel-gradient-start: #383838;
            --skeuo-panel-gradient-end: #2a2a2a;
            --skeuo-panel-shadow-light: #4a4a4a;
            --skeuo-panel-shadow-dark: #1c1c1c;
            --skeuo-panel-border: #444;
            --skeuo-button-text: #e0e0e0;
            --skeuo-button-gradient-start: #484848;
            --skeuo-button-gradient-end: #3a3a3a;
            --skeuo-button-border: #555;
            --skeuo-paper-bg: #252525;
            --skeuo-paper-border: #404040;
            --footer-bg: #1a1a1a;
            --footer-text: #888;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.7; /* Increased for readability */
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .main-header {
            background-color: var(--header-bg);
            color: var(--header-text);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        .logo-container { display: flex; align-items: center; }
        .main-header h1 { font-size: 1.8rem; font-weight: 600; margin: 0; }
        .nav-button {
            background: none; border: none; color: var(--nav-button-text);
            padding: 0.5rem 1rem; margin-left: 0.5rem; cursor: pointer;
            font-size: 1rem; border-radius: 5px;
            transition: background-color 0.2s ease, color 0.2s ease, transform 0.1s ease;
        }
        .nav-button:hover { background-color: var(--nav-button-hover-bg); color: var(--header-text); transform: translateY(-1px); }
        .nav-button.active { background-color: var(--nav-button-active-bg); color: var(--header-text); font-weight: bold; }
        .nav-button:active { transform: translateY(0px); }

        main { flex-grow: 1; padding: 2rem; max-width: 1200px; margin: 0 auto; width: 100%; }
        .content-section { display: none; animation: fadeIn 0.5s ease-out; }
        .content-section.active-section { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .content-section h2 { font-size: 2rem; color: var(--section-title-color); margin-bottom: 1.5rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--section-border-color); }
        .content-section h3 { font-size: 1.5rem; color: var(--hero-title-color); margin-top: 1.5rem; margin-bottom: 0.75rem; }
        .content-section h4 { font-size: 1.2rem; color: var(--text-color); margin-top: 1rem; margin-bottom: 0.5rem; }

        .hero-banner { text-align: center; padding: 2rem; background-color: var(--hero-bg); border-radius: 8px; margin-bottom: 2rem; }
        .hero-banner h2 { border-bottom: none; color: var(--hero-title-color); font-size: 1.8rem; }
        .cta-button {
            display: inline-block; background-color: var(--cta-bg); color: var(--cta-text);
            padding: 0.8rem 1.8rem; font-size: 1.1rem; border: none; border-radius: 8px;
            cursor: pointer; text-decoration: none; margin-top: 1rem;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease;
            text-shadow: 0 -1px 0px rgba(0,0,0,0.2);
            box-shadow: 0 1px 2px rgba(0,0,0,0.2), inset 0 1px 0px rgba(255,255,255,0.3);
        }
        .cta-button:hover { background-color: var(--cta-hover-bg); transform: translateY(-2px); }
        .cta-button:active { transform: translateY(0px); background-color: var(--cta-active-bg); box-shadow: inset 0 2px 3px rgba(0,0,0,0.3), 0 0 0px rgba(255,255,255,0); }

        .quick-start-wizard { text-align: center; margin-top: 2rem; }
        .quick-start-wizard h3 { margin-bottom: 1rem; font-weight: 500; color: var(--text-color); font-size: 1.3rem; }
        .wizard-options { display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap; }
        .wizard-option {
            padding: 1rem 1.5rem; font-size: 1rem; cursor: pointer;
            border: 1px solid var(--input-border); border-radius: 8px;
            background-color: var(--hero-bg); color: var(--text-color); /* Adjusted for theme */
            transition: all 0.2s ease; min-width: 180px;
        }
        .wizard-option i { margin-right: 0.5rem; color: var(--primary-accent); }
        .wizard-option:hover { border-color: var(--primary-accent); background-color: var(--bg-color); transform: translateY(-3px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }

        .supportive-intro, .empowering-note { font-size: 1.1rem; margin-bottom: 1.5rem; color: var(--text-color); }
        .info-card {
            background: linear-gradient(145deg, var(--info-card-gradient-start), var(--info-card-gradient-end));
            border: 1px solid var(--info-card-border); border-radius: 10px; padding: 1.5rem; margin-bottom: 1.5rem;
            display: flex; align-items: flex-start; gap: 1rem;
            box-shadow: 4px 4px 8px var(--info-card-shadow-dark), -4px -4px 8px var(--info-card-shadow-light);
        }
        .info-card-icon { font-size: 1.8rem; color: var(--primary-accent); margin-top: 0.2rem; min-width: 30px; text-align: center; }
        .info-card h3 { font-size: 1.3rem; color: var(--text-color); margin-bottom: 0.5rem; margin-top: 0; }

        .search-filter-bar { display: flex; gap: 1rem; margin-bottom: 1.5rem; align-items: center; }
        #task-search, #category-filter {
            padding: 0.75rem; font-size: 1rem; border: 1px solid var(--input-border); border-radius: 6px;
            background: linear-gradient(to bottom, var(--input-bg-gradient-start), var(--input-bg-gradient-end));
            box-shadow: inset 0 1px 2px var(--input-shadow); color: var(--text-color);
        }
        #task-search { flex-grow: 1; }
        #category-filter { background-color: var(--hero-bg); } /* Solid for select */

        .task-list-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem; }
        .task-card { cursor: pointer; transition: transform 0.2s ease-in-out, box-shadow 0.3s ease-in-out; }
        .task-card:hover {
            transform: translateY(-5px);
            box-shadow: 7px 7px 15px var(--skeuo-panel-shadow-dark), -7px -7px 15px var(--skeuo-panel-shadow-light),
                        inset 1px 1px 2px var(--skeuo-panel-shadow-light), inset -1px -1px 2px var(--skeuo-panel-shadow-dark);
        }
        .task-card h3 { font-size: 1.4rem; color: var(--task-card-title); margin-bottom: 0.5rem; margin-top: 0; }
        .task-card .task-icon { font-size: 1.5rem; margin-right: 0.5rem; color: var(--primary-accent); }
        .task-card p { font-size: 0.95rem; color: var(--text-color); margin-bottom: 1rem; }

        .apple-native-status { font-size: 0.9rem; padding: 0.3rem 0.6rem; border-radius: 4px; margin-bottom: 0.5rem; display: inline-block; }
        .apple-native-status.good { background-color: #28a74533; color: #28a745; border: 1px solid #28a74588;}
        .apple-native-status.limited { background-color: #ffc10733; color: #ffc107; border: 1px solid #ffc10788;}
        .apple-native-status.poor { background-color: #dc354533; color: #dc3545; border: 1px solid #dc354588;}
        [data-theme="dark"] .apple-native-status.good { color: #71dd8a; border-color: #71dd8a88; }
        [data-theme="dark"] .apple-native-status.limited { color: #ffe082; border-color: #ffe08288; }
        [data-theme="dark"] .apple-native-status.poor { color: #ef9a9a; border-color: #ef9a9a88; }
        .apple-native-status i { margin-right: 5px; }

        #learn-grow p, #design-philosophy p { margin-bottom: 0.75rem; }
        #learn-grow ul, #design-philosophy ul { list-style-position: inside; margin-left: 1rem; margin-bottom: 1rem; }
        #learn-grow li, #design-philosophy li { margin-bottom: 0.5rem; }
        #learn-grow table { width: 100%; border-collapse: collapse; margin-bottom: 1.5rem; background-color: var(--hero-bg); box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        #learn-grow th, #learn-grow td { border: 1px solid var(--table-border); padding: 0.75rem; text-align: left; }
        #learn-grow th { background-color: var(--table-header-bg); font-weight: 600; }
        #learn-grow td a, #learn-grow li a, #learn-grow p a, #design-philosophy li a { color: var(--link-color); text-decoration: none; }
        #learn-grow td a:hover, #learn-grow li a:hover, #learn-grow p a:hover, #design-philosophy li a:hover { text-decoration: underline; }
        .citation-list { list-style-type: decimal; font-size: 0.9rem; }
        .citation-list li { margin-bottom: 0.25rem; word-break: break-all; }

        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: var(--modal-bg); animation: fadeInModal 0.3s ease-out; }
        @keyframes fadeInModal { from { opacity: 0; } to { opacity: 1; } }
        .modal-content { margin: 5% auto; width: 80%; max-width: 700px; position: relative; animation: slideInModal 0.3s ease-out; }
        @keyframes slideInModal { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .close-button { color: var(--text-color); float: right; font-size: 28px; font-weight: bold; background: none; border: none; cursor: pointer; line-height: 1; opacity: 0.7; }
        .close-button:hover, .close-button:focus { color: var(--text-color); text-decoration: none; opacity: 1;}

        #task-detail-content h3 { margin-top: 0; color: var(--task-card-title); font-size: 1.6rem; }
        #task-detail-content .alternative-tool {
            border: 1px solid var(--section-border-color); padding: 1rem; margin-top: 1rem; border-radius: 6px;
            background-color: var(--bg-color); box-shadow: inset 0 0 5px rgba(0,0,0,0.05);
        }
        #task-detail-content .alternative-tool h4 { font-size: 1.1rem; margin-bottom: 0.3rem; margin-top: 0; display: flex; align-items: center; }
        #task-detail-content .alternative-tool p { font-size: 0.9rem; margin-bottom: 0.2rem; }
        #task-detail-content .alternative-tool .access-links a { margin-right: 10px; color: var(--link-color); text-decoration: none; }
        #task-detail-content .alternative-tool .access-links a:hover { text-decoration: underline; }
        #task-detail-content .affordability-meter { font-weight: bold; }
        #task-detail-content .affordability-meter.free { color: #28a745; }
        #task-detail-content .affordability-meter.freemium { color: #fd7e14; }
        #task-detail-content .affordability-meter.paid { color: #dc3545; }
        [data-theme="dark"] #task-detail-content .affordability-meter.free { color: #71dd8a; }
        [data-theme="dark"] #task-detail-content .affordability-meter.freemium { color: #ffe082; }
        [data-theme="dark"] #task-detail-content .affordability-meter.paid { color: #ef9a9a; }

        .footer-container {
            text-align: center;
            padding: 1.5rem;
            background-color: var(--footer-bg);
            color: var(--footer-text);
            font-size: 0.9rem;
            margin-top: auto; 
        }
        .footer-container a { color: var(--nav-button-text); text-decoration: none; }
        .footer-container a:hover { text-decoration: underline; }
        
        .theme-toggle-button {
            background: var(--nav-button-hover-bg); color: var(--header-text);
            border: none; padding: 0.5rem 0.8rem; border-radius: 5px;
            cursor: pointer; font-size: 1rem; margin-left: 1rem;
            transition: background-color 0.2s ease, transform 0.1s ease;
        }
        .theme-toggle-button:hover { transform: scale(1.05); }
        .theme-toggle-button:active { transform: scale(0.98); }


        @media (max-width: 768px) {
            .main-header { flex-direction: column; padding: 1rem; }
            .main-header nav { margin-top: 0.5rem; display: flex; flex-wrap: wrap; justify-content: center; }
            .nav-button { margin: 0.2rem; }
            .theme-toggle-button { margin-top: 0.5rem; margin-left: 0; }
            main { padding: 1rem; }
            .task-list-container { grid-template-columns: 1fr; }
            .modal-content { width: 90%; margin: 10% auto; }
            .wizard-options { flex-direction: column; }
            .search-filter-bar { flex-direction: column; gap: 0.5rem; }
            #task-search, #category-filter { width: 100%; }
            #learn-grow th, #learn-grow td { padding: 0.5rem; font-size: 0.9rem; }
        }

        .skeuo-panel {
            background: linear-gradient(145deg, var(--skeuo-panel-gradient-start), var(--skeuo-panel-gradient-end));
            border-radius: 12px;
            box-shadow: 5px 5px 10px var(--skeuo-panel-shadow-dark), -5px -5px 10px var(--skeuo-panel-shadow-light),
                        inset 1px 1px 2px var(--skeuo-panel-shadow-light), inset -1px -1px 2px var(--skeuo-panel-shadow-dark); 
            padding: 20px; border: 1px solid var(--skeuo-panel-border); 
        }
        .skeuo-button {
            padding: 10px 20px; font-size: 1rem; font-weight: 500; color: var(--skeuo-button-text);
            text-shadow: 0 1px 0px rgba(255,255,255,0.7); /* Light text shadow for light mode */
            background: linear-gradient(to bottom, var(--skeuo-button-gradient-start) 0%, var(--skeuo-button-gradient-end) 100%);
            border: 1px solid var(--skeuo-button-border); border-radius: 8px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1), inset 0 1px 0px rgba(255,255,255,0.5); 
            cursor: pointer; transition: all 0.1s ease-in-out;
        }
        [data-theme="dark"] .skeuo-button { text-shadow: 0 1px 0px rgba(0,0,0,0.3); /* Dark text shadow for dark mode */ }
        .skeuo-button:hover {
            background: linear-gradient(to bottom, var(--skeuo-button-gradient-start), var(--skeuo-button-gradient-end)); /* Slight shift or brightness */
            filter: brightness(1.05); border-color: var(--primary-accent);
        }
        .skeuo-button:active {
            background: linear-gradient(to top, var(--skeuo-button-gradient-start) 0%, var(--skeuo-button-gradient-end) 100%); /* Invert gradient */
            box-shadow: inset 0 2px 3px rgba(0,0,0,0.2), 0 0 0px rgba(255,255,255,0); 
            transform: translateY(1px); filter: brightness(0.95);
        }
        .skeuo-paper {
            background-color: var(--skeuo-paper-bg); border: 1px solid var(--skeuo-paper-border);
            box-shadow: 2px 2px 5px rgba(0,0,0,0.05), inset 0 0 10px rgba(0,0,0,0.02); 
            border-radius: 4px; padding: 1.5rem;
        }
        .no-results { text-align: center; padding: 2rem; color: var(--text-color); opacity:0.7; grid-column: 1 / -1; }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="logo-container">
            <h1>AI Ally</h1>
        </div>
        <nav>
            <button data-section="home" class="nav-button active" aria-label="Home section">Home</button>
            <button data-section="understand-apple" class="nav-button" aria-label="Understanding Apple's AI section">Apple's AI</button>
            <button data-section="task-explorer" class="nav-button" aria-label="AI Task Explorer section">Task Explorer</button>
            <button data-section="learn-grow" class="nav-button" aria-label="Learn and Grow with AI section">Learn & Grow</button>
            <button id="theme-toggle" class="theme-toggle-button" aria-label="Toggle dark and light mode">
                <i class="fas fa-moon"></i> <span class="toggle-text">Dark Mode</span>
            </button>
        </nav>
    </header>

    <main>
        <!-- SECTION: Home / Welcome -->
        <section id="home" class="content-section active-section" role="region" aria-labelledby="home-title">
            <div id="home-title" class="hero-banner skeuo-panel">
                <h2>Unlock the Full Power of AI on Your Apple Devices.</h2>
                <p>Navigate the AI landscape with clarity. Discover tools that work <em>for you</em>, even when Apple's native options fall short.</p>
                <button class="cta-button" data-section-target="task-explorer">Explore AI Tasks Now</button>
            </div>

            <div class="quick-start-wizard">
                <h3>What do you want to achieve with AI today?</h3>
                <div class="wizard-options" role="group" aria-label="Quick start AI task categories">
                    <button class="wizard-option skeuo-button" data-category-target="Writing" aria-label="AI for Writing and Content">
                        <i class="fas fa-pencil-alt" aria-hidden="true"></i> Writing & Content
                    </button>
                    <button class="wizard-option skeuo-button" data-category-target="Visuals" aria-label="AI for Image and Video">
                        <i class="fas fa-image" aria-hidden="true"></i> Image & Video
                    </button>
                    <button class="wizard-option skeuo-button" data-category-target="Productivity" aria-label="AI for Productivity">
                        <i class="fas fa-rocket" aria-hidden="true"></i> Productivity
                    </button>
                    <button class="wizard-option skeuo-button" data-category-target="Learning" aria-label="AI for Research and Learning">
                        <i class="fas fa-book-open" aria-hidden="true"></i> Research & Learning
                    </button>
                </div>
            </div>
        </section>

        <!-- SECTION: Understand Apple's AI -->
        <section id="understand-apple" class="content-section" role="region" aria-labelledby="understand-title">
            <h2 id="understand-title">Your Apple Devices & AI: The Current Picture</h2>
            <p class="supportive-intro">We love our Apple devices for their design, security, and ecosystem. When it comes to cutting-edge AI, however, there are some things to be aware of so you can make the most informed choices.</p>
            <div class="info-card">
                <div class="info-card-icon"><i class="fas fa-microphone-alt-slash" aria-hidden="true"></i></div>
                <div>
                    <h3>Siri's Journey & Limitations</h3>
                    <p>Siri pioneered voice assistants, but for complex tasks requiring deep understanding or multi-app integration, alternatives like Google Assistant or Microsoft Copilot often provide more robust solutions. We'll show you how to access them!</p>
                </div>
            </div>
            <div class="info-card">
                 <div class="info-card-icon"><i class="fas fa-mobile-alt" aria-hidden="true"></i></div>
                 <div>
                    <h3>"Apple Intelligence" & Hardware</h3>
                    <p>Apple's new AI features are promising but often require the latest hardware (e.g., iPhone 15 Pro, M-series Macs). AI Ally helps you find powerful AI tools that work great on your current devices.</p>
                </div>
            </div>
            <div class="info-card">
                <div class="info-card-icon"><i class="fas fa-dollar-sign" aria-hidden="true"></i></div>
                <div>
                    <h3>The "Premium" Gap</h3>
                    <p>You don't always need expensive subscriptions for top-tier AI. We highlight fantastic free and affordable alternatives to tools like ChatGPT Plus, ensuring you get great value.</p>
                </div>
            </div>
            <p class="empowering-note">Our goal is to empower you, not to criticize. Knowledge is power, and with AI Ally, you'll have the power to choose the best AI for your needs!</p>
        </section>

        <!-- SECTION: Task Explorer -->
        <section id="task-explorer" class="content-section" role="region" aria-labelledby="explorer-title">
            <h2 id="explorer-title">AI Task Explorer</h2>
            <div class="search-filter-bar">
                <label for="task-search" class="sr-only">Search AI Tasks</label>
                <input type="search" id="task-search" placeholder="e.g., summarize PDF, generate logo..." aria-label="Search for AI tasks">
                <label for="category-filter" class="sr-only">Filter by Category</label>
                <select id="category-filter" aria-label="Filter tasks by category">
                    <option value="all">All Categories</option>
                </select>
            </div>
            <div id="task-list" class="task-list-container" aria-live="polite">
                <!-- AI Task Cards will be injected here by JavaScript -->
            </div>
        </section>

        <!-- SECTION: Task Detail View (Modal) -->
        <div id="task-detail-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
            <div class="modal-content skeuo-panel">
                <button class="close-button" aria-label="Close task details modal">×</button>
                <div id="task-detail-content">
                    <!-- Task details will be injected here. h3 inside will have id="modal-title" -->
                </div>
            </div>
        </div>
        
        <!-- SECTION: Learn & Grow -->
        <section id="learn-grow" class="content-section skeuo-paper" role="region" aria-labelledby="learn-title">
            <h2 id="learn-title">Learn & Grow with AI: A Comprehensive Guide</h2>
            <p>While Apple's ecosystem has lagged in AI integration, numerous cross-platform alternatives excel across key AI tasks. Here's a comprehensive guide to top solutions, including cutting-edge models and pricing:</p>

            <h3>1. AI Assistants & Chatbots</h3>
            <h4>Alternatives:</h4>
            <ul>
                <li><strong><a href="https://openai.com/chatgpt/" target="_blank" rel="noopener noreferrer">ChatGPT-4o</a></strong> (Free / $20/month): OpenAI's multimodal model with image/voice analysis.</li>
                <li><strong><a href="https://www.anthropic.com/claude" target="_blank" rel="noopener noreferrer">Claude 3 Opus</a></strong> ($20/month): Anthropic's high-reasoning model for complex tasks.</li>
                <li><strong><a href="https://www.deepseek.com/" target="_blank" rel="noopener noreferrer">DeepSeek Models</a></strong> (Free API access for some models): Cost-effective models.</li>
                <li><strong><a href="https://grok.x.ai/" target="_blank" rel="noopener noreferrer">Grok</a></strong> ($16/month via X Premium+): Real-time data from X platform.</li>
                <li><strong><a href="https://deepmind.google/technologies/gemini/" target="_blank" rel="noopener noreferrer">Gemini 1.5 Pro / Advanced</a></strong> (Paid API / Google One AI Premium): Google's model with large context window.</li>
            </ul>

            <h3>2. Video Generation</h3>
            <h4>Top Tools:</h4>
            <table>
                <thead><tr><th>Tool</th><th>Price</th><th>Key Features</th></tr></thead>
                <tbody>
                    <tr><td><strong><a href="https://www.synthesia.io/" target="_blank" rel="noopener noreferrer">Synthesia</a></strong></td><td>$22+/month</td><td>230+ avatars, 140+ languages.</td></tr>
                    <tr><td><strong><a href="https://runwayml.com/" target="_blank" rel="noopener noreferrer">Runway</a></strong></td><td>Free / $12+/user/month</td><td>Frame-by-frame editing, advanced Gen models.</td></tr>
                    <tr><td><strong><a href="https://www.opus.pro/" target="_blank" rel="noopener noreferrer">OpusClip</a></strong></td><td>$19+/month</td><td>Auto-shortens long videos.</td></tr>
                </tbody>
            </table>

            <h3>3. Image Generation</h3>
            <h4>Solutions:</h4>
            <ul>
                <li><strong><a href="https://www.midjourney.com/" target="_blank" rel="noopener noreferrer">Midjourney</a></strong> ($10+/month): Photorealistic and artistic generation.</li>
                <li><strong><a href="https://openai.com/dall-e-3/" target="_blank" rel="noopener noreferrer">DALL-E 3</a></strong> (Via ChatGPT Plus / API): Precise prompt adherence.</li>
                <li><strong><a href="https://stability.ai/stablediffusion" target="_blank" rel="noopener noreferrer">Stable Diffusion 3</a></strong> (Open source / API): Customizable, powerful.</li>
                <li><strong><a href="https://www.adobe.com/sensei/generative-ai/firefly.html" target="_blank" rel="noopener noreferrer">Adobe Firefly</a></strong> (In Creative Cloud plans): Commercial-safe, Adobe integrated.</li>
            </ul>

            <h3>4. Coding Assistance</h3>
            <h4>Developers' Choices:</h4>
            <ul>
                <li><strong><a href="https://www.qodo.ai/" target="_blank" rel="noopener noreferrer">Qodú</a></strong> (Plans vary): Test generation & code explanations.</li>
                <li><strong><a href="https://github.com/features/copilot" target="_blank" rel="noopener noreferrer">GitHub Copilot</a></strong> ($10+/user/month): Real-time code suggestions.</li>
                <li><strong><a href="https://replit.com/" target="_blank" rel="noopener noreferrer">Replit</a></strong> (Free / $7+/month with GhostWriter): Browser IDE with AI.</li>
                <li><strong><a href="https://aws.amazon.com/codewhisperer/" target="_blank" rel="noopener noreferrer">Amazon CodeWhisperer</a></strong> (Free individual / $19/user/month): Security scanning.</li>
            </ul>
            
            <h3>5. Mental Health Support</h3>
            <h4>Therapy Alternatives & Support Chatbots:</h4>
            <ul>
                <li><strong><a href="https://www.wysa.com/" target="_blank" rel="noopener noreferrer">Wysa</a></strong> (Free basic / Premium plans): CBT techniques, mood tracking.</li>
                <li><strong><a href="https://woebothealth.com/" target="_blank" rel="noopener noreferrer">Woebot</a></strong> (Generally free): Stanford-developed CBT chatbot.</li>
                <li><strong><a href="https://www.youper.ai/" target="_blank" rel="noopener noreferrer">Youper</a></strong> (Subscription): Personalized emotional pattern analysis.</li>
                <li><strong><a href="https://pi.ai/" target="_blank" rel="noopener noreferrer">Pi.AI</a></strong> (Free): Empathetic conversational support.</li>
            </ul>
            
            <h3>6. Content Creation</h3>
            <h4>Writing Tools:</h4>
            <ul>
                <li><strong><a href="https://www.copy.ai/" target="_blank" rel="noopener noreferrer">Copy.ai</a></strong> (Free / $36+/month): Brand voice consistency.</li>
                <li><strong><a href="https://rytr.me/" target="_blank" rel="noopener noreferrer">Rytr</a></strong> (Free / $9+/month): 40+ writing templates.</li>
                <li><strong><a href="https://www.grammarly.com/" target="_blank" rel="noopener noreferrer">Grammarly</a></strong> (Free / $12+/month Premium): Style/tone optimization.</li>
                <li><strong><a href="https://www.sudowrite.com/" target="_blank" rel="noopener noreferrer">Sudowrite</a></strong> ($10+/month): Creative fiction assistant.</li>
            </ul>

            <h3>7. Research & Education</h3>
            <h4>Knowledge Tools:</h4>
            <ul>
                <li><strong><a href="https://www.perplexity.ai/" target="_blank" rel="noopener noreferrer">Perplexity</a></strong> (Free / $20/month Pro): Conversational search with citations.</li>
                <li><strong><a href="https://notebooklm.google/" target="_blank" rel="noopener noreferrer">NotebookLM</a></strong> (Free): Google's project-based learning AI.</li>
                <li><strong><a href="https://consensus.app/" target="_blank" rel="noopener noreferrer">Consensus</a></strong> (Free / Premium plans): AI for academic research.</li>
            </ul>

            <h3>8. Voice Generation</h3>
            <h4>Audio Solutions:</h4>
            <ul>
                <li><strong><a href="https://elevenlabs.io/" target="_blank" rel="noopener noreferrer">ElevenLabs</a></strong> (Free / $5+/month): Emotion-aware voice cloning.</li>
                <li><strong><a href="https://murf.ai/" target="_blank" rel="noopener noreferrer">Murf.ai</a></strong> (Free / $19+/month): Studio-quality voiceovers.</li>
                <li><strong><a href="https://resemble.ai/" target="_blank" rel="noopener noreferrer">Resemble AI</a></strong> (Usage-based): Real-time voice changing.</li>
            </ul>

            <h3>9. Music Generation</h3>
            <h4>Composition Tools:</h4>
            <ul>
                <li><strong><a href="https://www.suno.ai/" target="_blank" rel="noopener noreferrer">Suno</a></strong> (Free / $8+/month): Full tracks from text.</li>
                <li><strong><a href="https://www.udio.com/" target="_blank" rel="noopener noreferrer">Udio</a></strong> (Free beta): Collaborative song creation.</li>
                <li><strong><a href="https://www.aiva.ai/" target="_blank" rel="noopener noreferrer">AIVA</a></strong> (Free / €11+/month): AI music composer.</li>
            </ul>

            <h3>10. Project Management</h3>
            <h4>AI Orchestration & Productivity:</h4>
            <ul>
                <li><strong><a href="https://asana.com/" target="_blank" rel="noopener noreferrer">Asana</a></strong> ($10.99+/user/month with AI): Smart workflow automation.</li>
                <li><strong><a href="https://clickup.com/" target="_blank" rel="noopener noreferrer">ClickUp</a></strong> (Free / $7+/user/month with AI): AI task prioritization.</li>
                <li><strong><a href="https://n8n.io/" target="_blank" rel="noopener noreferrer">n8n</a></strong> (Free self-hosted / Cloud $20+/month): Custom automation.</li>
            </ul>

            <h3>Cost Comparison Table for Popular Foundational Models</h3>
            <table>
                <thead><tr><th>Model</th><th>Free Tier Access</th><th>Paid Plan (approx.)</th><th>Best For</th></tr></thead>
                <tbody>
                    <tr><td>GPT-4o (OpenAI)</td><td>Yes (limited)</td><td>$20/month (Plus) / API</td><td>Multimodal, general capability</td></tr>
                    <tr><td>Claude 3 (Anthropic)</td><td>Yes (limited Sonnet/Haiku)</td><td>$20/month (Pro for Opus) / API</td><td>Document analysis, reasoning</td></tr>
                    <tr><td>DeepSeek Models</td><td>Yes (API quotas)</td><td>API-based</td><td>Cost-effective coding</td></tr>
                    <tr><td>Grok (xAI)</td><td>No (X Premium+)</td><td>$16/month (X Premium+)</td><td>Real-time X data</td></tr>
                    <tr><td>Gemini (Google)</td><td>Yes (1.0 Pro web/API)</td><td>$19.99/m (AI Premium for 1.5 Pro) / API</td><td>Long-context, multimodal</td></tr>
                </tbody>
            </table>
            <p>For enterprise needs, consider open-source models like <strong>Qwen-72B</strong> or <strong>Gemma</strong> series. Always verify data compliance when using cloud-based AI services.</p>
            <p><em>Disclaimer: Pricing and features for AI tools change frequently. Always check official websites.</em></p>

            <hr style="margin: 2rem 0;">
            <div id="design-philosophy" class="skeuo-paper" style="margin-top:1.5rem; padding:1.5rem;">
                <h3>AI Ally's Design & UX Philosophy</h3>
                <p>This app aims to be useful, usable, and delightful, employing modern UX/UI principles even in this simplified static demonstration:</p>
                <ul>
                    <li><strong>Responsive Design:</strong> Ensures a good experience on mobile, tablet, or desktop. (Achieved via CSS media queries).</li>
                    <li><strong>Microinteractions:</strong> Subtle hover effects and button press feedback make the app feel more responsive.</li>
                    <li><strong>Typography and White Space:</strong> Uses clear system fonts and generous spacing for readability.</li>
                    <li><strong>Accessible Design (A11y Focus):</strong> Incorporates semantic HTML, ARIA roles for key interactive elements, and strives for good keyboard navigation. Color contrast is considered, especially with Dark Mode.</li>
                    <li><strong>Dark Mode Support:</strong> Offers a theme toggle for user preference and comfort, respecting system settings where possible.</li>
                    <li><strong>Sticky Navigation:</strong> The header remains visible for easy access to different sections.</li>
                    <li><strong>Minimalist Aesthetic with Purposeful Color:</strong> While embracing skeuomorphic touches for a classic Apple feel, the color palette is designed to be functional and guide attention.</li>
                    <li><strong>Iconography:</strong> Leverages Font Awesome for scalable and consistent icons, enhancing visual communication.</li>
                </ul>
                <p><strong>Future Enhancements Could Include:</strong></p>
                <ul>
                    <li><strong>Scroll-Based Animations:</strong> To make content discovery more engaging.</li>
                    <li><strong>Skeleton Screens & Lazy Loading:</strong> To improve perceived performance with more extensive content.</li>
                </ul>
            </div>
             <h3>Sources & Further Reading:</h3>
            <p><em>(Note: Some links below are general topic pages or blog posts. Year "2025" in some original source links may be a placeholder/typo for "2024" or future-dated articles.)</em></p>
            <ol class="citation-list">
                <li><a href="https://www.synthesia.io/post/ai-tools" target="_blank" rel="noopener noreferrer">synthesia.io/post/ai-tools</a></li>
                <li><a href="https://www.byteplus.com/en/topic/384844" target="_blank" rel="noopener noreferrer">byteplus.com/en/topic/384844</a></li>
                <li><a href="https://www.copy.ai/blog/ai-content-creation" target="_blank" rel="noopener noreferrer">copy.ai/blog/ai-content-creation</a></li>
                <li><a href="https://techcrunch.com/2024/05/13/chatgpt-everything-to-know-about-the-ai-chatbot/" target="_blank" rel="noopener noreferrer">techcrunch.com/.../chatgpt-everything-to-know...</a></li>
                <li><a href="https://www.shakudo.io/blog/top-9-large-language-models" target="_blank" rel="noopener noreferrer">shakudo.io/blog/top-9-large-language-models</a></li>
                <li><a href="https://www.qodo.ai/blog/best-ai-coding-assistant-tools" target="_blank" rel="noopener noreferrer">qodo.ai/blog/best-ai-coding-assistant-tools</a></li>
                <li><a href="https://www.choosingtherapy.com/wysa-app-review/" target="_blank" rel="noopener noreferrer">choosingtherapy.com/wysa-app-review</a></li>
                 <li>Perplexity Share: <a href="https://pplx.ai/share" target="_blank" rel="noopener noreferrer">pplx.ai/share</a> (Original source for the list)</li>
            </ol>
        </section>
    </main>

    <footer class="footer-container">
        <p>© 2024 AI Ally. Empowering Apple Users with AI. (Enhanced UX Demo)</p>
        <p><a href="#" data-section-target="learn-grow" data-subsection-target="design-philosophy" id="link-to-design-philosophy">About AI Ally's Design</a></p>
    </footer>

    <script>
        // --- DATA ---
        const aiTools = {
            "chatgpt": { id: "chatgpt", name: "ChatGPT (by OpenAI)", developer: "OpenAI", appleAccess: { ios: "https://apps.apple.com/us/app/chatgpt/id6448311069", macos: "Web / Desktop App", web: "https://chat.openai.com" }, strengths: "Versatile, GPT-4o is multimodal.", affordability: "Freemium", whyGoodForAppleUsers: "Excellent iOS/macOS apps, powerful free tier." },
            "gemini": { id: "gemini", name: "Google Gemini", developer: "Google", appleAccess: { ios: "Via Google App / Gemini App", macos: "Web", web: "https://gemini.google.com" }, strengths: "Contextual understanding, research, Google integration.", affordability: "Freemium", whyGoodForAppleUsers: "Web & app access, powerful free model." },
            "copilot": { id: "copilot", name: "Microsoft Copilot", developer: "Microsoft", appleAccess: { ios: "https://apps.apple.com/us/app/microsoft-copilot/id6472538445", macos: "Web / Edge / App", web: "https://copilot.microsoft.com" }, strengths: "GPT-4o, DALL-E 3, summarization.", affordability: "Free", whyGoodForAppleUsers: "iOS app, free advanced models." },
            "midjourney": { id: "midjourney", name: "Midjourney", developer: "Midjourney, Inc.", appleAccess: { ios: "Via Discord / Web", macos: "Via Discord / Web", web: "https://www.midjourney.com" }, strengths: "High-quality artistic images.", affordability: "Paid", whyGoodForAppleUsers: "Discord & web access." },
            "canva_ai": { id: "canva_ai", name: "Canva Magic Studio", developer: "Canva", appleAccess: { ios: "https://apps.apple.com/us/app/canva-design-photo-video/id897446215", macos: "https://www.canva.com/download/mac/", web: "https://www.canva.com" }, strengths: "Easy AI design tools.", affordability: "Freemium", whyGoodForAppleUsers: "Excellent iOS/macOS apps." },
            "perplexity": { id: "perplexity", name: "Perplexity AI", developer: "Perplexity AI", appleAccess: { ios: "https://apps.apple.com/us/app/perplexity-ask-ai/id1660945857", macos: "Web", web: "https://www.perplexity.ai/" }, strengths: "Conversational search with citations.", affordability: "Freemium", whyGoodForAppleUsers: "Good iOS app, clean web interface." },
            "claude": { id: "claude", name: "Claude (by Anthropic)", developer: "Anthropic", appleAccess: { ios: "https://apps.apple.com/us/app/claude-ai/id6472522224", macos: "Web", web: "https://claude.ai/" }, strengths: "Reasoning, long document analysis.", affordability: "Freemium", whyGoodForAppleUsers: "iOS app, good web interface." }
        };
        const aiTasks = [
            { id: "summarize-text", name: "Summarize Long Text", icon: "fas fa-file-alt", category: "Writing", description: "Condense articles or emails.", appleNativeStatus: { level: "limited", text: "Siri can't summarize. 'Apple Intelligence' may offer basic on-device summarization on newer hardware.", icon: "fas fa-exclamation-triangle" }, recommendedToolIds: ["chatgpt", "claude", "gemini", "perplexity"] },
            { id: "generate-images", name: "Generate Images from Text", icon: "fas fa-paint-brush", category: "Visuals", description: "Create unique images.", appleNativeStatus: { level: "poor", text: "Apple offers no native AI image generation tools. External services are needed.", icon: "fas fa-times-circle" }, recommendedToolIds: ["midjourney", "copilot", "canva_ai"] },
            { id: "draft-emails", name: "Draft Emails & Messages", icon: "fas fa-envelope", category: "Writing", description: "Get help writing emails.", appleNativeStatus: { level: "limited", text: "Siri dictates. 'Apple Intelligence' aims for writing aid, but specialized tools are better.", icon: "fas fa-exclamation-triangle" }, recommendedToolIds: ["chatgpt", "gemini", "claude", "copilot"] },
            { id: "code-assistance", name: "Get Coding Assistance", icon: "fas fa-code", category: "Productivity", description: "Generate, debug, explain code.", appleNativeStatus: { level: "poor", text: "Xcode has autocompletion, no generative AI co-pilot features.", icon: "fas fa-times-circle" }, recommendedToolIds: ["chatgpt", "copilot"] },
            { id: "plan-trip", name: "Plan a Trip Itinerary", icon: "fas fa-plane-departure", category: "Productivity", description: "AI assistance for travel plans.", appleNativeStatus: { level: "limited", text: "Siri finds flights/hotels, but not full itineraries.", icon: "fas fa-exclamation-triangle" }, recommendedToolIds: ["gemini", "chatgpt", "perplexity"] },
            { id: "research-topics", name: "Research Topics with Citations", icon: "fas fa-search", category: "Learning", description: "Explore subjects with verifiable sources.", appleNativeStatus: { level: "poor", text: "Siri/Spotlight search web, no AI research with citations.", icon: "fas fa-times-circle" }, recommendedToolIds: ["perplexity", "gemini", "chatgpt"] }
        ];

        // --- APP LOGIC ---
        document.addEventListener('DOMContentLoaded', () => {
            const taskListContainer = document.getElementById('task-list');
            const categoryFilter = document.getElementById('category-filter');
            const taskSearchInput = document.getElementById('task-search');
            const taskDetailModal = document.getElementById('task-detail-modal');
            const taskDetailContent = document.getElementById('task-detail-content');
            const closeModalButton = taskDetailModal.querySelector('.close-button');
            const navButtons = document.querySelectorAll('header nav .nav-button:not(.theme-toggle-button)');
            const contentSections = document.querySelectorAll('.content-section');
            const ctaButton = document.querySelector('.cta-button[data-section-target]');
            const wizardOptions = document.querySelectorAll('.wizard-option');
            const themeToggleButton = document.getElementById('theme-toggle');
            const themeToggleText = themeToggleButton.querySelector('.toggle-text');
            const themeToggleIcon = themeToggleButton.querySelector('i');
            const designPhilosophyLink = document.getElementById('link-to-design-philosophy');


            // --- Theme Management ---
            function setMode(mode) {
                document.documentElement.setAttribute('data-theme', mode);
                localStorage.setItem('theme', mode);
                if (mode === 'dark') {
                    themeToggleIcon.classList.remove('fa-moon');
                    themeToggleIcon.classList.add('fa-sun');
                    themeToggleText.textContent = "Light Mode";
                } else {
                    themeToggleIcon.classList.remove('fa-sun');
                    themeToggleIcon.classList.add('fa-moon');
                    themeToggleText.textContent = "Dark Mode";
                }
            }
            const prefersDarkScheme = window.matchMedia("(prefers-color-scheme: dark)");
            const currentTheme = localStorage.getItem("theme") ? localStorage.getItem("theme") : (prefersDarkScheme.matches ? 'dark' : 'light');
            setMode(currentTheme);

            themeToggleButton.addEventListener('click', () => {
                const newTheme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
                setMode(newTheme);
            });
            prefersDarkScheme.addEventListener('change', e => { // Listen for OS theme changes
                if (!localStorage.getItem("theme")) { // Only if user hasn't manually set a theme
                    setMode(e.matches ? 'dark' : 'light');
                }
            });

            // --- Navigation ---
            function showSection(sectionId, subsectionId = null) {
                contentSections.forEach(section => section.classList.remove('active-section'));
                const activeSec = document.getElementById(sectionId);
                if (activeSec) activeSec.classList.add('active-section');

                navButtons.forEach(button => {
                    button.classList.remove('active');
                    if (button.dataset.section === sectionId) button.classList.add('active');
                });
                window.scrollTo(0, 0);
                if (subsectionId) {
                    const subElement = document.getElementById(subsectionId);
                    if (subElement) {
                        setTimeout(() => subElement.scrollIntoView({ behavior: 'smooth' }), 100); // Delay for section to render
                    }
                }
            }

            navButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault();
                    showSection(button.dataset.section);
                    if (button.dataset.section === 'task-explorer') populateTasks();
                });
            });
            
            if(ctaButton) {
                ctaButton.addEventListener('click', (e) => {
                    e.preventDefault();
                    showSection(ctaButton.dataset.sectionTarget);
                    if (ctaButton.dataset.sectionTarget === "task-explorer") populateTasks();
                });
            }
             if(designPhilosophyLink) {
                designPhilosophyLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    showSection(designPhilosophyLink.dataset.sectionTarget, designPhilosophyLink.dataset.subsectionTarget);
                });
            }

            wizardOptions.forEach(button => {
                button.addEventListener('click', () => {
                    showSection('task-explorer');
                    if(categoryFilter) categoryFilter.value = button.dataset.categoryTarget;
                    populateTasks(); 
                });
            });

            function populateCategories() {
                if (!categoryFilter) return;
                const categories = [...new Set(aiTasks.map(task => task.category))];
                while (categoryFilter.options.length > 1) categoryFilter.remove(1);
                categories.sort().forEach(category => {
                    const option = document.createElement('option');
                    option.value = category; option.textContent = category;
                    categoryFilter.appendChild(option);
                });
            }

            function renderTaskCard(task) {
                const card = document.createElement('button'); // Changed to button for accessibility
                card.className = 'task-card skeuo-panel'; 
                card.dataset.taskId = task.id;
                card.setAttribute('aria-label', `View details for ${task.name}`);

                card.innerHTML = `
                    <h3><i class="${task.icon} task-icon" aria-hidden="true"></i> ${task.name}</h3>
                    <p>${task.description.substring(0,100)}${task.description.length > 100 ? '...' : ''}</p>
                    <div class="apple-native-status ${task.appleNativeStatus.level}">
                        <i class="${task.appleNativeStatus.icon}" aria-hidden="true"></i> Apple Native: ${task.appleNativeStatus.text.substring(0, 70)}...
                    </div>
                `;
                card.addEventListener('click', () => showTaskDetail(task.id));
                return card;
            }

            function populateTasks() {
                if (!taskListContainer || !taskSearchInput || !categoryFilter) return;
                taskListContainer.innerHTML = ''; 
                const searchTerm = taskSearchInput.value.toLowerCase();
                const selectedCategory = categoryFilter.value;
                const filteredTasks = aiTasks.filter(task => 
                    (task.name.toLowerCase().includes(searchTerm) || task.description.toLowerCase().includes(searchTerm)) &&
                    (selectedCategory === 'all' || task.category === selectedCategory)
                );
                if (filteredTasks.length === 0) {
                    taskListContainer.innerHTML = '<p class="no-results">No tasks match your criteria. Try broadening your search!</p>';
                    return;
                }
                filteredTasks.forEach(task => taskListContainer.appendChild(renderTaskCard(task)));
            }

            function showTaskDetail(taskId) {
                const task = aiTasks.find(t => t.id === taskId);
                if (!task || !taskDetailModal || !taskDetailContent) return;
                let alternativesHTML = '<h4>Recommended Alternatives:</h4>';
                if (task.recommendedToolIds && task.recommendedToolIds.length > 0) {
                    task.recommendedToolIds.forEach(toolId => {
                        const tool = aiTools[toolId];
                        if (tool) {
                            alternativesHTML += `
                                <div class="alternative-tool">
                                    <h4>${tool.name}</h4>
                                    <p><strong>Developer:</strong> ${tool.developer}</p>
                                    <p><strong>Strengths:</strong> ${tool.strengths}</p>
                                    <p><strong>Affordability:</strong> <span class="affordability-meter ${tool.affordability.toLowerCase()}">${tool.affordability}</span></p>
                                    <p><strong>Why good for Apple Users:</strong> ${tool.whyGoodForAppleUsers}</p>
                                    <p class="access-links"><strong>Access:</strong>
                                        ${tool.appleAccess.ios && tool.appleAccess.ios !== "N/A" ? `<a href="${tool.appleAccess.ios}" target="_blank" rel="noopener noreferrer" title="iOS App Store"><i class="fab fa-apple" aria-hidden="true"></i> iOS</a>` : ''}
                                        ${tool.appleAccess.macos && tool.appleAccess.macos !== "Web" && tool.appleAccess.macos !== "N/A" ? `<a href="${tool.appleAccess.macos}" target="_blank" rel="noopener noreferrer" title="macOS App"><i class="fas fa-desktop" aria-hidden="true"></i> macOS App</a>` : ''}
                                        ${tool.appleAccess.web && tool.appleAccess.web !== "N/A" ? `<a href="${tool.appleAccess.web}" target="_blank" rel="noopener noreferrer" title="Web Access"><i class="fas fa-globe" aria-hidden="true"></i> Web</a>` : ''}
                                    </p>
                                </div>`;
                        }
                    });
                } else { alternativesHTML = '<p>No specific third-party alternatives listed for this task yet.</p>'; }

                taskDetailContent.innerHTML = `
                    <h3 id="modal-title"><i class="${task.icon} task-icon" aria-hidden="true"></i> ${task.name}</h3>
                    <p>${task.description}</p><hr>
                    <h4>Apple Ecosystem Status:</h4>
                    <div class="apple-native-status ${task.appleNativeStatus.level}" style="margin-bottom: 1rem; display: block;">
                        <i class="${task.appleNativeStatus.icon}" aria-hidden="true"></i> ${task.appleNativeStatus.text}
                    </div><hr>
                    ${alternativesHTML}`;
                taskDetailModal.style.display = 'block';
                if(closeModalButton) closeModalButton.focus(); // Focus on close button for accessibility
            }

            if(closeModalButton) {
                closeModalButton.addEventListener('click', () => { if(taskDetailModal) taskDetailModal.style.display = 'none'; });
            }
            window.addEventListener('click', (event) => { if (event.target == taskDetailModal) if(taskDetailModal) taskDetailModal.style.display = 'none'; });
            window.addEventListener('keydown', (event) => { // ESC to close modal
                if (event.key === 'Escape' && taskDetailModal && taskDetailModal.style.display === 'block') {
                    taskDetailModal.style.display = 'none';
                }
            });

            populateCategories();
            const initialSection = window.location.hash ? window.location.hash.substring(1) : 'home';
            showSection(initialSection);
            if (initialSection === 'task-explorer' || (document.getElementById('task-explorer') && document.getElementById('task-explorer').classList.contains('active-section'))) {
                 populateTasks(); 
            }

            if(taskSearchInput) taskSearchInput.addEventListener('input', populateTasks);
            if(categoryFilter) categoryFilter.addEventListener('change', populateTasks);
        });
    </script>
</body>
</html>
